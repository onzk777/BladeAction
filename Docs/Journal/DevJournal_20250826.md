## 🎯 **내일 진행할 애니메이션 재생 및 전투 시스템 구현 계획**

**현재 마련된 메소드들을 기반으로 한 대략적인 계획입니다:**

---

### **1단계: 애니메이션 재생 구현 (우선순위 높음)**

#### **현재 테스트 가능한 메소드:**
- ✅ `OnPlayActionCommand()` - 공격 애니메이션 (이미 구현됨)

#### **구현해야 할 메소드들:**
1. **`OnInterrupted()`** - 공격이 차단된 애니메이션
2. **`OnSuccessParry()`** - 쳐내기 성공 애니메이션  
3. **`OnBeHitted()`** - 피격 애니메이션
4. **`OnPlayDefence()`** - 방어 애니메이션

---

### **2단계: 전투 시스템 호출 시점 연결**

#### **애니메이션 호출 시점 추가:**
- **`OnInterrupted`**: 공격 실패/차단 시
- **`OnSuccessParry`**: 방어 성공 시 (`InputVersusResult`에서 `HalfParry`/`PerfectParry` 결과 시)
- **`OnBeHitted`**: 피격 판정 시 (`InputVersusResult`에서 `PerfectHit`/`NormalHit` 결과 시)
- **`OnPlayDefence`**: 방어 커맨드 실행 시

---

### **3단계: 전투 시스템 확장 (선택사항)**

#### **추가 구현 가능한 기능들:**
- **연결 공격 시스템**: 히트 간 애니메이션 전환
- **콤보 시스템**: 연속 공격 시 애니메이션 변화
- **상태 기반 애니메이션**: 체력, 버프/디버프에 따른 애니메이션 변화

---

## **내일 작업 순서:**

1. **`OnSuccessParry` 구현** (가장 간단 - 이미 판정 로직 존재)
2. **`OnBeHitted` 구현** (판정 결과와 직접 연결)
3. **`OnInterrupted` 구현** (공격 실패 시점 파악 필요)
4. **`OnPlayDefence` 구현** (방어 커맨드 실행 시점 파악 필요)

**이 순서로 진행하면 점진적으로 전투 시스템이 완성될 것입니다!** 🎮✨

---

## 🎯 **오늘 진행할 구현 계획 (2025-08-26)**

### **📋 Feature List**

#### **🎬 애니메이션 시스템**
1. **피격 애니메이션** - 방어자가 피격당할 때 애니메이션 재생 (완벽 입력 종료 시점)
2. **패리 성공 애니메이션** - 방어자가 완벽 입력 성공 시 패리 애니메이션 재생
3. **패리 당함 애니메이션** - 공격자가 패리에 당하면 액션 중단 애니메이션 재생

#### **⚔️ 전투 시스템**
4. **방어 입력 시스템** - Key Hold 형태의 방어 입력 구현 (스페이스바 사용)
5. **액션 중단 처리** - 공격자가 패리에 당했을 때 액션 즉시 중단
6. **중단 후 대기 시간** - GlobalConfig에 WaitTimeAfterActionInterrupt 설정 추가

---

### **🔧 구현 계획**

#### **1단계: 방어 입력 시스템 구현 (우선순위 높음)**
- `CombatManager`의 기본 방어 on 설정을 false로 변경
- 방어 입력을 위한 Key Hold 시스템 구현
- 방어 모드 활성화/비활성화 로직 구현

#### **2단계: 액션 중단 처리 시스템 구현**
- `InputVersusResult`에서 패리 판정 시 공격자 액션 중단 로직 구현
- 중단 시 현재 액션 즉시 종료 처리
- 이후 타격 수행 차단 로직 구현

#### **3단계: 중단 후 대기 시간 시스템**
- `GlobalConfig`에 `WaitTimeAfterActionInterrupt` Float 데이터 추가
- 액션 중단 후 설정된 시간만 대기하고 턴 종료 처리
- 턴 종료까지 남은 시간을 모두 대기하지 않도록 수정

#### **4단계: 애니메이션 연결**
- `OnBeHitted()` 메소드에 실제 Spine 애니메이션 재생 로직 구현
- `OnSuccessParry()` 메소드에 실제 Spine 애니메이션 재생 로직 구현
- `OnInterrupted()` 메소드에 실제 Spine 애니메이션 재생 로직 구현

---

### **📅 오늘 작업 순서**

1. **방어 입력 시스템 구현** (기본 구조)
2. **액션 중단 처리 로직 구현** (핵심 기능)
3. **GlobalConfig 설정 추가** (WaitTimeAfterActionInterrupt)
4. **중단 후 대기 시간 처리** (턴 종료 로직)
5. **애니메이션 메소드 연결** (Spine 애니메이션 재생)

**목표: 오늘 하루 안에 방어 시스템과 액션 중단 시스템의 기본 구조를 완성하고, 애니메이션 연결까지 마무리하는 것!** 🚀
